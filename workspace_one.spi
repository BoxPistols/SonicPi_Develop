use_bpm 120

live_loop :melo do
  ##| osc = use_osc "192.168.9.10", 12345
  ##| osc "/log/multi_message"
  
  osc = use_osc "172.20.0.15", 3333
  osc "/test", x,10
  
  ##| use_osc "127.0.0.1", 4321
  ##| osc "/log/multi_message"
  
  with_fx :reverb do
    n = rrand_i(4, 8)
    n.times do
      ns = (scale :c2, :mixolydian, num_octaves: 4 )
      play ns.choose, amp: rrand(0, 0.3), pan: rrand(-1.0, 1.0), release: rrand(1.0, 4.0)
      sleep 0.25
    end
    sleep rrand(0.5, 2.0)
  end
  
end
